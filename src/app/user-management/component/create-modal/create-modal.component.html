<div class="backdrop" (click)="closePopUp()"></div>
<div class="create-model-popup">
  <div class="modal-header">
    <h4 class="modal-title">Add New User</h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="closePopUp()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <form
    #addUserForm="ngForm"
    (ngSubmit)="addUserForm.form.valid && addUser(addUserForm)"
  >
    <div class="modal-body">
      <div class="form-group">
        <label for="uname">User Name</label>
        <input
          type="text"
          class="form-control"
          name="uname"
          id="uname"
          #uname="ngModel"
          [(ngModel)]="addUserData.name"
          required
        />
        <div
          *ngIf="addUserForm.submitted && uname.invalid"
          class="invalid-feedback"
        >
          <div *ngIf="uname.errors.required">
            Username is required
          </div>
        </div>
      </div>
      <div class="create-user-form">
        <div class="form-group col-md-6">
          <div class="">
            <label for="uemail">Email</label>
            <input
              type="email"
              class="form-control"
              name="uemail"
              id="uemail"
              #uemail="ngModel"
              [(ngModel)]="addUserData.email"
              required
              email
              UniqueEmail
            />
          </div>
          <div
            *ngIf="addUserForm.submitted && uemail.invalid"
            class="invalid-feedback"
          >
            <div *ngIf="uemail.errors.required">
              Email is reqiured
            </div>
            <div *ngIf="uemail.errors.email">
              Please enter valid email
            </div>
            
            <div class="text-danger" *ngIf="uemail.invalid && (uemail.dirty || uemail.tauched)">
              Email is already exist
           </div>
          </div>
         
        </div>

        <div class="form-group col-md-6">
          <div class="">
            <label for="role">Role</label>
            <select
              name="role"
              class="form-control"
              #role="ngModel"
              [(ngModel)]="addUserData.user_type"
            >
              <option value="">Select Role</option>
              <option value="1">Admin</option>
              <option value="2"> User</option>
            </select>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="upassword">Password</label>
        <input
          type="password"
          class="form-control"
          name="upassword"
          id="upassword"
          #upassword="ngModel"
          [(ngModel)]="addUserData.password"
          required
        />
        <div
          *ngIf="addUserData.submitted && upassword.invalid"
          class="invalid-feedback"
        >
          <div *ngIf="upassword.errors.required">
            Password is required
          </div>
        </div>
      </div>
      <!-- <div class="form-group">
        <label for="cupassword">Confirm Password</label>
        <input
          type="password"
          class="form-control"
          name="cupassword"
          id="cupassword"
          #cupassword="ngModel"
          [(ngModel)]="addUserData.confirmPassword"
          required
        />
      </div> -->
    </div>
    <div class="modal-footer">
      <button type="submit" class="btn btn-info">Create User</button>
      <button type="button" class="btn btn-light" (click)="closePopUp()">
        Close
      </button>
    </div>
  </form>
</div>